{"ast":null,"code":"import _objectSpread from \"/Users/danyyounan/workspace/kudos_oss/app/http/web/app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/danyyounan/workspace/kudos_oss/app/http/web/app/src/Home/index.js\";\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableViews from 'react-swipeable-views';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Grid from '@material-ui/core/Grid';\nimport { withAuth } from '@okta/okta-react';\nimport GithubRepo from \"../GithubRepo\";\nimport SearchBar from \"../SearchBar\";\nimport githubClient from '../githubClient';\nimport APIClient from '../apiClient';\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n    marginTop: 30\n  },\n  paper: {\n    padding: theme.spacing.unit * 2,\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  }\n});\n\nclass Home extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      value: 0,\n      repos: [],\n      kudos: []\n    };\n\n    this.handleTabChange = (event, value) => {\n      this.setState({\n        value\n      });\n    };\n\n    this.handleTabChangeIndex = index => {\n      this.setState({\n        value: index\n      });\n    };\n\n    this.resetRepos = repos => this.setState(_objectSpread({}, this.state, {\n      repos\n    }));\n\n    this.isKudo = repo => this.state.kudos.find(r => r.id == repo.id);\n\n    this.onKudo = repo => {\n      this.updateBackend(repo);\n    };\n\n    this.updateBackend = repo => {\n      if (this.isKudo(repo)) {\n        this.apiClient.deleteKudo(repo);\n      } else {\n        this.apiClient.createKudo(repo);\n      }\n\n      this.updateState(repo);\n    };\n\n    this.updateState = repo => {\n      if (this.isKudo(repo)) {\n        this.setState(_objectSpread({}, this.state, {\n          kudos: this.state.kudos.filter(r => r.id !== repo.id)\n        }));\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          kudos: [repo, ...this.state.kudos]\n        }));\n      }\n    };\n\n    this.onSearch = event => {\n      const target = event.target;\n\n      if (!target.value || target.length < 3) {\n        return;\n      }\n\n      if (event.which !== 13) {\n        return;\n      }\n\n      githubClient.getJSONRepos(target.value).then(response => {\n        target.blur();\n        this.setState(_objectSpread({}, this.state, {\n          value: 1\n        }));\n        this.resetRepos(response.items);\n      });\n    };\n\n    this.renderRepos = repos => {\n      if (!repos) {\n        return [];\n      }\n\n      return repos.map(repo => {\n        return React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          md: 3,\n          key: repo.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(GithubRepo, {\n          onKudo: this.onKudo,\n          isKudo: this.isKudo(repo),\n          repo: repo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }));\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const accessToken = await this.props.auth.getAccessToken();\n    this.apiClient = new APIClient(accessToken);\n    this.apiClient.getKudos().then(data => this.setState(_objectSpread({}, this.state, {\n      kudos: data\n    })));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: styles.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(SearchBar, {\n      auth: this.props.auth,\n      onSearch: this.onSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(Tabs, {\n      value: this.state.value,\n      onChange: this.handleTabChange,\n      indicatorColor: \"primary\",\n      textColor: \"primary\",\n      fullWidth: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      label: \"Kudos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Tab, {\n      label: \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })), React.createElement(SwipeableViews, {\n      axis: 'x-reverse',\n      index: this.state.value,\n      onChangeIndex: this.handleTabChangeIndex,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 16,\n      style: {\n        padding: '20px 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.renderRepos(this.state.kudos)), React.createElement(Grid, {\n      container: true,\n      spacing: 16,\n      style: {\n        padding: '20px 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.renderRepos(this.state.repos))));\n  }\n\n}\n\nexport default withStyles(styles)(withAuth(Home));","map":{"version":3,"sources":["/Users/danyyounan/workspace/kudos_oss/app/http/web/app/src/Home/index.js"],"names":["React","withStyles","SwipeableViews","Tabs","Tab","Grid","withAuth","GithubRepo","SearchBar","githubClient","APIClient","styles","theme","root","flexGrow","marginTop","paper","padding","spacing","unit","textAlign","color","palette","text","secondary","Home","Component","state","value","repos","kudos","handleTabChange","event","setState","handleTabChangeIndex","index","resetRepos","isKudo","repo","find","r","id","onKudo","updateBackend","apiClient","deleteKudo","createKudo","updateState","filter","onSearch","target","length","which","getJSONRepos","then","response","blur","items","renderRepos","map","componentDidMount","accessToken","props","auth","getAccessToken","getKudos","data","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableViews from 'react-swipeable-views';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Grid from '@material-ui/core/Grid';\nimport { withAuth } from '@okta/okta-react';\n\nimport GithubRepo from \"../GithubRepo\"\nimport SearchBar from \"../SearchBar\"\n\nimport githubClient from '../githubClient'\nimport APIClient from '../apiClient'\n\nconst styles = theme => ({\n root: {\n   flexGrow: 1,\n   marginTop: 30\n },\n paper: {\n   padding: theme.spacing.unit * 2,\n   textAlign: 'center',\n   color: theme.palette.text.secondary,\n },\n});\n\nclass Home extends React.Component {\n state = {\n   value: 0,\n   repos: [],\n   kudos: []\n };\n\n async componentDidMount() {\n   const accessToken = await this.props.auth.getAccessToken()\n   this.apiClient = new APIClient(accessToken);\n   this.apiClient.getKudos().then((data) =>\n     this.setState({...this.state, kudos: data})\n   );\n }\n\n handleTabChange = (event, value) => {\n   this.setState({ value });\n };\n\n handleTabChangeIndex = index => {\n   this.setState({ value: index });\n };\n\n resetRepos = repos => this.setState({ ...this.state, repos })\n\n isKudo = repo => this.state.kudos.find(r => r.id == repo.id)\n  onKudo = (repo) => {\n   this.updateBackend(repo);\n }\n\n updateBackend = (repo) => {\n   if (this.isKudo(repo)) {\n     this.apiClient.deleteKudo(repo);\n   } else {\n     this.apiClient.createKudo(repo);\n   }\n   this.updateState(repo);\n }\n\n updateState = (repo) => {\n   if (this.isKudo(repo)) {\n     this.setState({\n       ...this.state,\n       kudos: this.state.kudos.filter( r => r.id !== repo.id )\n     })\n   } else {\n     this.setState({\n       ...this.state,\n       kudos: [repo, ...this.state.kudos]\n     })\n   }\n }\n\n onSearch = (event) => {\n   const target = event.target;\n   if (!target.value || target.length < 3) { return }\n   if (event.which !== 13) { return }\n\n   githubClient\n     .getJSONRepos(target.value)\n     .then((response) => {\n       target.blur();\n       this.setState({ ...this.state, value: 1 });\n       this.resetRepos(response.items);\n     })\n }\n  renderRepos = (repos) => {\n   if (!repos) { return [] }\n   return repos.map((repo) => {\n     return (\n       <Grid item xs={12} md={3} key={repo.id}>\n         <GithubRepo onKudo={this.onKudo} isKudo={this.isKudo(repo)} repo={repo} />\n       </Grid>\n     );\n   })\n }\n\n render() {\n   return (\n     <div className={styles.root}>\n       <SearchBar auth={this.props.auth} onSearch={this.onSearch} />\n        <Tabs\n         value={this.state.value}\n         onChange={this.handleTabChange}\n         indicatorColor=\"primary\"\n         textColor=\"primary\"\n         fullWidth\n       >\n         <Tab label=\"Kudos\" />\n         <Tab label=\"Search\" />\n       </Tabs>\n      \n       <SwipeableViews\n         axis={'x-reverse'}\n         index={this.state.value}\n         onChangeIndex={this.handleTabChangeIndex}\n       >\n         <Grid container spacing={16} style={{padding: '20px 0'}}>\n           { this.renderRepos(this.state.kudos) }\n         </Grid>\n         <Grid container spacing={16} style={{padding: '20px 0'}}>\n           { this.renderRepos(this.state.repos) }\n         </Grid>\n       </SwipeableViews>\n     </div>\n   );\n }\n}\n\nexport default withStyles(styles)(withAuth(Home));"]},"metadata":{},"sourceType":"module"}